# 引入知识库

## 学习目标
- 掌握知识库的创建和配置
- 学会上传和管理素材
- 理解检索方式的设置

## 知识库概述
### 什么是知识库
- 定义和作用
- 在Coze中的重要性
- 与Bot的关系

## 上传素材
### 支持的文件类型
- 文档格式（PDF、Word、TXT等）
- 图片格式
- 其他媒体文件

### 素材分类
- **热点脚本**：当前流行的视频脚本模板
- **品牌文案**：企业品牌相关的文案素材
- **背景资料**：行业知识、产品信息等

### 上传步骤
1. 进入知识库管理界面
2. 选择文件上传
3. 设置文件标签和分类
4. 确认上传

## 设置检索方式
### 检索算法选择
- 关键词匹配
- 语义相似度
- 混合检索

### 上下文长度配置
- 短文本检索（适合标题、关键词）
- 长文本检索（适合完整文档）
- 自定义长度设置

## 实践练习
### 练习1：创建抖音素材库
- 上传热门视频脚本
- 设置合适的检索参数
- 测试检索效果

### 练习2：优化检索效果
- 调整检索算法
- 测试不同关键词的检索结果
- 优化素材标签

## 常见问题
- 上传失败的解决方法
- 检索结果不准确的优化策略
- 知识库容量限制

## 下一步
学习如何在Flow中使用知识库进行内容生成


---------------


## **第四节 · 引入知识库（Knowledge Base, KB）**

### 1. 学习目标

* 理解知识库（KB）在 Coze 中的作用与运行原理
* 掌握从零创建 KB、上传资料、设置检索规则的方法
* 学会优化 KB 的结构与分块策略，提高检索精度
* 能够将 KB 与 Bot、Flow 结合，实现 **RAG（检索增强生成）**
* 形成企业内知识库建设与更新的标准流程

---

### 2. 课程讲解

#### 2.1 什么是 Coze 知识库（KB）

* **定义**：
  知识库是存放结构化/非结构化文档的地方，通过向量化与检索机制，帮助 Bot 在生成回答时引用事实依据。
* **核心价值**：

  * 提升回答的**准确性**（避免幻觉）
  * 引用**可验证的来源**（带引文）
  * 实现领域知识**可控与可更新**
* **原理简述**：

  * 文档被分块（chunking）→ 向量化（embedding）→ 存储在向量数据库
  * 用户问题 → 转换成向量 → 检索 Top-K 相关片段 → 拼接到 Prompt → 模型生成回答

---

#### 2.2 KB 在 Coze 应用的使用场景

* 客服问答：产品规格、售后政策
* 营销内容：品牌调性、广告用语库
* 业务知识：行业标准、内部流程
* 数据分析：历史报表、指标定义

---

#### 2.3 KB 的关键组成

| 元素   | 说明        | 示例             |
| ---- | --------- | -------------- |
| 文档   | 支撑知识的原始内容 | 产品手册、案例文档      |
| 元数据  | 文档附加信息    | 来源、版本、标签       |
| 分块策略 | 文档切分规则    | 按段落、字符数、标题     |
| 检索参数 | 控制召回结果    | Top-K 数量、相似度阈值 |
| 引文设置 | 结果中是否展示来源 | 显示“文档名+段落”     |

---

### 3. 步骤演示

#### 目标

创建一个“品牌调性与爆款案例库”，供抖音脚本生成 Bot 使用。

#### 操作步骤

1. **进入 Knowledge Base 管理**

   * 左侧菜单点击 **Knowledge**
   * 点击 **Create Knowledge Base**

2. **设置 KB 基本信息**

   * 名称：`品牌调性 & 案例库`
   * 描述：存放品牌调性文档与抖音爆款脚本示例
   * 标签：`品牌`、`短视频`、`案例`

3. **上传文档**

   * 支持格式：TXT、MD、PDF、DOCX、CSV
   * 示例：

     * `brand_style.md`（品牌调性）
     * `tiktok_success_cases.md`（爆款案例）

4. **设置分块策略**

   * 分块大小：500\~800 字符
   * 重叠：50\~100 字符（保持上下文连贯性）

5. **配置检索参数**

   * Top-K：3\~5（一次检索返回的片段数）
   * 相似度阈值：0.8（避免低相关内容进入回答）

6. **启用引文功能**

   * 打开“显示来源”
   * 格式：文档名 + 段落编号

7. **保存并测试**

   * 点击 **Test Knowledge Base**
   * 输入：`品牌适合什么样的短视频文案风格？`
   * 观察是否召回调性描述的片段

8. **绑定 KB 到 Bot**

   * 打开 Bot 设置 → 知识库 → 选择 `品牌调性 & 案例库`
   * 测试 Bot 时，确认回答中包含 KB 内容

---

### 4. 优化建议（进阶）

* **标签化管理**：给 KB 内每个文档打标签（如“调性”、“案例”、“政策”），便于条件过滤。
* **定期更新**：设定每月一次更新 KB 的任务，清理过期信息。
* **版本控制**：保留历史版本，避免新内容覆盖正确答案。
* **分主题建库**：避免一个 KB 过大，影响检索速度与准确度。

---

### 5. 实操案例

**案例目标**
为“新品上市文案助手” Bot 创建 KB，用于生成符合品牌风格的宣传文案。

**数据准备**

* `brand_style.md`（品牌语调与关键词）
* `product_specs.md`（新品规格、卖点）

**流程**

1. 创建 KB `新品发布知识库`
2. 上传两份文档
3. 设置 Top-K = 4，阈值 = 0.85
4. 绑定到 `新品上市文案助手` Bot
5. 测试输入：

   ```
   为我们新推出的防晒连衣裙写一段15秒的抖音宣传文案
   ```

---

### 6. 课后作业

1. 创建一个与你业务相关的 KB（不少于 2 篇文档）。
2. 设置合理的分块大小与检索参数。
3. 在 Bot 中绑定 KB 并测试 3 个问题，记录：

   * 检索的文档是否正确
   * 回答是否引用了 KB 内容
4. 提出至少 2 条 KB 优化建议。


